# Hash: {{ output "dirhash" (joinPath .chezmoi.sourceDir ".data/registry") "-quiet" "-nowait" }}

$registryFiles = Join-Path $env:CHEZMOI_SOURCE_DIR ".data\registry"

# for each file in the directory, run reg import
Get-ChildItem -Path $registryFiles -Filter "*.reg" | ForEach-Object {
    $regFile = $_.FullName
    Write-Host "Importing registry file: $regFile"
    sudo reg import $regFile
    if ($LASTEXITCODE -ne 0) {
        Write-Host "Failed to import registry file: $regFile"
    } else {    
        Write-Host "Successfully imported registry file: $regFile"
    }
}